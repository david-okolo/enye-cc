(this["webpackJsonpenye-cc"]=this["webpackJsonpenye-cc"]||[]).push([[0],{248:function(e,t,a){e.exports=a(469)},253:function(e,t,a){},469:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(15),c=a.n(l);a(253),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o,s=a(25),i=a(65),m=a(27),u=a(480),p=a(77),d=a(491),y=a(492),f=a(493),h=a(43),g=a.n(h),b=a(63),E=a(45),k=a(244),v=a(122),S=a(472),O=a(481),j=a(476),I=a(473),T=a(218),w=a.n(T),x=a(486),C=a(485),P=function(e){return r.a.createElement(C.a,{content:e.content,title:e.title},r.a.createElement("div",{style:{fontWeight:"bolder",color:"white",width:"100%"}},r.a.createElement(x.a,{onClick:function(){e.handleMarkerIconClick({title:e.title,content:e.content,color:"green",text:"destination",location:{lat:e.lat,lng:e.lng}})},style:{fontSize:"30px",color:e.color}})))},z=[{elementType:"geometry",stylers:[{color:"#212121"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{elementType:"labels.text.stroke",stylers:[{color:"#212121"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#757575"}]},{featureType:"administrative.country",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#181818"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"poi.park",elementType:"labels.text.stroke",stylers:[{color:"#1b1b1b"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#2c2c2c"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#373737"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#3c3c3c"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#4e4e4e"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#3d3d3d"}]}],M={lat:6.54,lng:3.39},L=function(e){return new RegExp(e,"gi")},R={1:"1 KM",10:"10 KM",20:"20 KM",30:"30 KM",40:"40 KM"},q={content:"",title:"You",color:"red",text:"you"},F=[{value:"hospital"},{value:"pharmacy"},{value:"clinic"},{value:"medical office"}],N=function(e){var t=e.center,a=e.zoom,n=e.markerLocations,l=e.handleMarkerIconClick;return r.a.createElement("div",{style:{flex:1,width:"100%"}},r.a.createElement(w.a,{zoom:a,bootstrapURLKeys:{key:"AIzaSyC43CWO8vyaWVaiCVtMnkpINJgsH0_9rTc"},center:t,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){!function(e,t){if(t&&e){var a=new t.StyledMapType(z);e.mapTypes.set("styled_map",a),e.setMapTypeId("styled_map")}}(e.map,e.maps)}},n.map((function(e){var t=e.location,a=e.color,n=e.text,c=e.title,o=e.content;return r.a.createElement(P,{title:c,content:o,handleMarkerIconClick:l,key:n,lat:t.lat,lng:t.lng,color:a,text:n})}))))},_=a(247),D=a(477),K=a(471),V=a(479),B=a(482),A=a(470),W=a(475),U=a(487),G=B.a.Search,J=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{options:e.options,onSearch:e.onSearch,onSelect:e.onSelect,onChange:e.handleSearchInputChange,value:e.query,style:{width:"100%",marginBottom:"10px"}},r.a.createElement(G,{placeholder:" search by keyword...",size:"large",enterButton:!0,prefix:r.a.createElement(U.a,null)})),r.a.createElement(W.a,{min:0,max:50,marks:e.marks,step:5,range:!1,tipFormatter:null,onChange:e.handleSearchRadiusChange,value:e.searchRadius}))},H=a(232),Y=a(223),$=function(e){var t=e.currentPage,a=e.handlePageChange,n=e.hospitalsData,l=e.handleMarkerIconClick,c=e.center,o=e.pageSize,s=e.pagination;return r.a.createElement(j.b,{size:"small",pagination:s&&{current:t,onChange:a,pageSize:o},dataSource:n,renderItem:function(e){return r.a.createElement(j.b.Item,{actions:[r.a.createElement(x.a,{key:"view-on-map",onClick:function(){return l({title:e.name,content:e.formatted_address,location:e.geometry.location,color:"green",text:"destination"})}})]},r.a.createElement(j.b.Item.Meta,{title:e.name,description:e.formatted_address}),r.a.createElement("div",null,(Object(Y.getDistance)(e.geometry.location,c)/1e3).toFixed(1),"km"))}})},Q=D.a.Text,X=function(e){var t=e.cropped,a=e.center,n=e.hospitalsData,l=e.dataIsLoading,c=e.currentPage,o=e.handlePageChange,s=e.handleMarkerIconClick,i=Object(_.a)(e,["cropped","center","hospitalsData","dataIsLoading","currentPage","handlePageChange","handleMarkerIconClick"]),m="Showing hospitals ".concat(i.query?"matching '".concat(i.query,"'"):""," within ").concat(i.searchRadius,"KM of you");return r.a.createElement(r.a.Fragment,null,r.a.createElement(J,i),r.a.createElement(K.a,null),t&&r.a.createElement(S.a,{justify:"space-between"},r.a.createElement(I.a,null,r.a.createElement(Q,{strong:!0},m)),r.a.createElement(I.a,null,r.a.createElement(H.a,{style:{fontSize:"28px",color:"#08979c"}}))),t&&r.a.createElement(V.a,{loading:l,active:!0},r.a.createElement(K.a,null),r.a.createElement($,{pagination:!0,handleMarkerIconClick:s,center:a,handlePageChange:o,pageSize:6,hospitalsData:n,currentPage:c})))},Z=a(488);!function(e){e.GET="GET",e.POST="POST"}(o||(o={}));var ee=function(){var e=Object(b.a)(g.a.mark((function e(t){var a,n,r,l,c,o,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.path,n=t.method,r=t.body,l=t.auth,c={success:!1},o=Object(E.a)(Object(E.a)(Object(E.a)({},n&&{method:n}),r&&{body:JSON.stringify(r)}),{},{headers:Object(E.a)({"Content-Type":"application/json"},l&&{Authorization:"Bearer ".concat(localStorage.getItem("token"))})}),e.next=5,fetch("".concat("https://david-enye-cc.ml").concat(a),o);case 5:if(s=e.sent,c.success=s.ok,!s.ok){e.next=11;break}return e.next=10,s.json();case 10:c.data=e.sent;case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=v.a.useBreakpoint,ae=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),l=a[0],c=a[1],i=Object(n.useState)([]),m=Object(s.a)(i,2),u=m[0],p=m[1],d=Object(n.useState)(10),y=Object(s.a)(d,2),f=y[0],h=y[1],v=Object(n.useState)(""),T=Object(s.a)(v,2),w=T[0],x=T[1],C=Object(n.useState)(""),P=Object(s.a)(C,2),z=P[0],_=P[1],D=Object(n.useState)(u),K=Object(s.a)(D,2),V=K[0],B=K[1],A=Object(n.useState)(!0),W=Object(s.a)(A,2),U=W[0],G=W[1],J=Object(n.useState)(M),H=Object(s.a)(J,2),Y=H[0],Q=H[1],ae=Object(n.useState)(1),ne=Object(s.a)(ae,2),re=ne[0],le=ne[1],ce=Object(n.useState)([]),oe=Object(s.a)(ce,2),se=oe[0],ie=oe[1],me=Object(n.useState)(13),ue=Object(s.a)(me,2),pe=ue[0],de=ue[1],ye=Object(n.useState)(!1),fe=Object(s.a)(ye,2),he=fe[0],ge=fe[1],be=Object(n.useState)(F),Ee=Object(s.a)(be,2),ke=Ee[0],ve=Ee[1],Se=te().xl;Object(n.useEffect)((function(){if(Y.lat!==M.lat&&Y.lng!==M.lng&&""!==w){var t={path:"/places"+(!e.isLoggedIn||l?"/free":""),method:o.POST,body:{query:w,radius:1e3*f,latlng:Y},auth:!0};G(!0),ee(t).then((function(t){var a,n,r=t.data.data;p(r),w&&(n=Oe(r,w)),B(n||r),G(!1);var c=(n||r).map((function(e){return{content:e.formatted_address,title:e.name,color:"white",text:e.id,location:e.geometry.location}}));ie([].concat(Object(k.a)(c),[Object(E.a)(Object(E.a)({},q),{},{location:Y})]));var o=(null===(a=e.pastSearches)||void 0===a?void 0:a.slice())||[];!l&&o.push({keyword:w,radius:1e3*f,timestamp:Date.now()}),e.setPastSearches(o)})),c(!1)}else G(!1)}),[f,Y,w]),Object(n.useEffect)((function(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,a=t.latitude,n=t.longitude;Q({lat:a,lng:n}),ie([Object(E.a)(Object(E.a)({},q),{},{location:{lat:a,lng:n}})])}))}),[]);var Oe=function(e,t){return e.filter((function(e){return e.name.match(L(t))}))},je=function(e,t){return e.filter((function(e){return e.value.match(L(t))}))},Ie=function(){var e=Object(b.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_(t),ve(je(F,t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(e){G(!0),le(1),h(Array.isArray(e)?e[0]:e);var t,a="number"===typeof e?e:e[0],n=(t=a)>39?9:t>24?10:t>15?11:t>9?12:13;de(n)},we=function(e,t){le(e)},xe=function(e){ie([Object(E.a)(Object(E.a)({},q),{},{location:Y}),e]),Se?ge(!1):(x(e.title),ge(!0))},Ce=function(e,t){x(e),ge(!0)},Pe=Se?12:24;return r.a.createElement(S.a,{style:{display:"flex",flexFlow:Se?"row":"column",height:"100vh",alignItems:"stretch"}},r.a.createElement(O.a,{title:"Results",placement:"left",width:Se?500:300,onClose:function(){e.setPastSearchVisible(!1)},visible:e.pastSearchVisible},r.a.createElement(j.b,{itemLayout:"horizontal",dataSource:e.pastSearches,renderItem:function(t){return r.a.createElement(j.b.Item,{actions:[r.a.createElement(Z.a,{onClick:function(){c(!0),Ie(t.keyword),Te(t.radius/1e3),Ce(t.keyword),e.setPastSearchVisible(!1)},style:{fontSize:"30px"}})]},r.a.createElement(j.b.Item.Meta,{title:r.a.createElement("div",null,r.a.createElement("h3",{style:{fontWeight:"bolder"}},t.keyword),"within ",t.radius/1e3,"KM"),description:new Date(t.timestamp).toLocaleString()}))}})),r.a.createElement(I.a,{span:Pe,style:{padding:"24px 24px 0 24px",backgroundColor:"#ffffff",flex:Se?"0 0 100%":"none"}},r.a.createElement(X,{cropped:!!Se,handleMarkerIconClick:xe,handleSearchInputChange:Ie,handleSearchRadiusChange:Te,handlePageChange:we,marks:R,hospitalsData:V,searchRadius:f,query:z,dataIsLoading:U,currentPage:re,center:Y,onSearch:function(e){le(1)},onSelect:Ce,options:ke})),r.a.createElement(I.a,{span:Pe,style:{backgroundColor:"#eeeeee",display:"flex",flex:1,overflow:"auto"}},r.a.createElement(N,{handleMarkerIconClick:xe,center:Y,setCenter:Q,zoom:pe,markerLocations:se})),!Se&&r.a.createElement(O.a,{title:"Results",placement:"bottom",onClose:function(){ge(!1)},visible:he,mask:!1},r.a.createElement($,{pagination:!1,handleMarkerIconClick:xe,handlePageChange:we,center:Y,hospitalsData:V,currentPage:re,pageSize:3})))},ne=a(474),re=a(174),le=a(478),ce=a(483),oe=a(484),se=a(489),ie=a(145),me=function(e){var t=e.setIsLoggedIn,a=Object(m.f)(),l=Object(n.useState)(!1),c=Object(s.a)(l,2),i=c[0],u=c[1],d=function(){var e=Object(b.a)(g.a.mark((function e(n){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee({path:"/auth/login",method:o.POST,body:{username:n.username,password:n.password},auth:!1});case 2:(r=e.sent).success?(localStorage.setItem("token",r.data.token),a.push("/"),t(!0)):(u(!0),setTimeout((function(){u(!1)}),2e3));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:d},r.a.createElement(ne.a,{direction:"vertical"},r.a.createElement(le.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}]},r.a.createElement(B.a,{size:"large",prefix:r.a.createElement(ie.a,null),placeholder:"Email"})),r.a.createElement(le.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},r.a.createElement(B.a,{size:"large",prefix:r.a.createElement(se.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})),r.a.createElement(le.a.Item,{name:"remember",valuePropName:"checked",noStyle:!0},r.a.createElement(ce.a,null,"Remember me")),r.a.createElement(le.a.Item,null,r.a.createElement(p.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in")))),i&&r.a.createElement(oe.a,{message:"Invalid login details",type:"error",showIcon:!0}))},ue=a(490),pe=function(e){var t=Object(m.f)(),a=Object(n.useState)(!1),l=Object(s.a)(a,2),c=l[0],i=l[1],u=function(){var e=Object(b.a)(g.a.mark((function e(a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee({path:"/user/register",method:o.POST,body:{name:a.name,email:a.username,password:a.password},auth:!1});case 2:e.sent.success?t.push("/account"):(i(!0),setTimeout((function(){i(!1)}),2e3));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a,{name:"normal_login",initialValues:{remember:!0},onFinish:u},r.a.createElement(ne.a,{direction:"vertical"},r.a.createElement(le.a.Item,{name:"name",rules:[{required:!0,message:"Please input your full name!"}]},r.a.createElement(B.a,{size:"large",prefix:r.a.createElement(ue.a,{className:"site-form-item-icon"}),placeholder:"Full Name"})),r.a.createElement(le.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}]},r.a.createElement(B.a,{size:"large",prefix:r.a.createElement(ie.a,null),placeholder:"Email"})),r.a.createElement(le.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},r.a.createElement(B.a,{size:"large",prefix:r.a.createElement(se.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})),r.a.createElement(le.a.Item,null,r.a.createElement(p.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Register")))),c&&r.a.createElement(oe.a,{message:"Registration failed. Try again",type:"error",showIcon:!0}))},de=function(e){var t=e.setIsLoggedIn,a=Object(m.g)(),l=a.path,c=a.url,o=Object(n.useState)("signIn"),u=Object(s.a)(o,2),p=u[0],d=u[1];return r.a.createElement(S.a,null,r.a.createElement(I.a,{span:12,offset:6},r.a.createElement(ne.a,{direction:"vertical"},r.a.createElement(re.a,{style:{marginBottom:"30px"},onClick:function(e){d(e.key)},mode:"horizontal",selectedKeys:[p]},r.a.createElement(re.a.Item,{key:"signUp"},r.a.createElement(i.b,{to:"".concat(c,"/register")}),"Sign Up"),r.a.createElement(re.a.Item,{key:"signIn"},r.a.createElement(i.b,{to:l}),"Sign In")),r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:l},r.a.createElement(me,{setIsLoggedIn:t,setSelected:d})),r.a.createElement(m.a,{path:"".concat(c,"/register")},r.a.createElement(pe,{setIsLoggedIn:t,setSelected:d}))))))},ye=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)([]),o=Object(s.a)(c,2),h=o[0],g=o[1],b=Object(n.useState)(!1),E=Object(s.a)(b,2),k=E[0],v=E[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("token");fetch("https://david-enye-cc.ml"+(e?"/profile":"/search/all"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(t){return t.ok&&e&&l(!0),t.json()})).then((function(e){g(e.pastSearches)})).catch((function(e){console.log(e)}))}),[a]),r.a.createElement(i.a,{basename:"/"},r.a.createElement(u.a,{title:"nearst",extra:[r.a.createElement(p.a,{key:"past-searches",type:"primary",size:"large",icon:r.a.createElement(d.a,null),onClick:function(){v(!0)}},"Past Searches"),r.a.createElement(i.b,{key:"login",to:a?"/":"/account"},r.a.createElement(p.a,{key:"logout",type:"link",size:"large",shape:"circle",icon:a?r.a.createElement(y.a,null):r.a.createElement(f.a,null),onClick:function(){a&&(localStorage.removeItem("token"),l(!1))}},a?"Logout":"Login"))]}),r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/"},r.a.createElement(ae,{setPastSearches:g,setPastSearchVisible:v,pastSearchVisible:k,isLoggedIn:a,pastSearches:h})),r.a.createElement(m.a,{path:"/account"},r.a.createElement(de,{setIsLoggedIn:l}))))};c.a.render(r.a.createElement(ye,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[248,1,2]]]);
//# sourceMappingURL=main.64b5bb81.chunk.js.map